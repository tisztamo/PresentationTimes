{"version":3,"sources":["model/chain.js","model/token.js","model/presentation.js","lib/qrcode.js","view/qr.js","view/hostpage.js","lib/reconnecting-websocket.js","model/chainevents.js","view/entrancepage.js","view/presentationlist.js","view/visitorpage.js","view/timerpage.js","view/keyloadpage.js","view/keyloadresult.js","main.js"],"names":["API_BASE_URL","WS_BASE_URL","conn","BigchainDB","Connection","_me","me","setMe","newMe","localStorage","setItem","JSON","stringify","recreateMe","createIdentity","Ed25519Keypair","loadOrCreateMe","document","location","search","startsWith","keys","substr","length","split","publicKey","privateKey","tokens","storedMe","getItem","parse","getTransaction","txId","cached","Promise","resolve","then","tx","id","simpleOutput","amount","Transaction","makeOutput","makeEd25519Condition","postTransaction","txSigned","signTransaction","postTransactionCommit","listOutputs","searchAssets","searchMetadata","populateWithAsset","transferTx","asset","assetTx","filetime_to_unixtimems","ft","Math","round","syncedTS","serverTS","clientTS","synchChainTime","beforeTS","Date","now","fetch","response","json","data","Number","currentFileTime","getChainSynchedTS","getChainTimeMillis","selectedToken","tokenLaunch","nTokens","creator","makeCreateTransaction","token","number_tokens","datetime","toString","res","selectToken","tokensLeft","createTx","findSourceTxForAmount","txs","find","outputs","ownerOutputIdx","giveTokens","receiverPubKey","metadata","getOwnedTokens","ownedTokens","sourceTx","transactions","sourceAmount","remaining","push","makeTransferTransaction","output_index","console","error","all","map","output","transaction_id","total","i","ownerOutput","transferAllToNewIdentity","saveSelectedToken","selectTokenById","tokenId","inputs","owners_before","dropSelectedToken","removeItem","loadSelectedToken","PRESENTATION_STARTED","PRESENTATION","findPresentations","assets","filter","createPresentation","presenterName","title","abstract","presenter","presentation","type","presenterPublicKey","startPresentation","grantedLength","timeStamp","state","startTS","ts","grantTime","usedTokens","collectedVotesDuringLastPeriod","autoGrant","neededNewTokens","log","String","findRunningPresentation","filtered","found","maxTS","Infinity","voteForRunning","running","alert","_QRCode","QRCode","apply","arguments","QR8bitByte","mode","QRMode","MODE_8BIT_BYTE","parsedData","l","byteArray","code","charCodeAt","Array","prototype","concat","unshift","QRCodeModel","typeNumber","errorCorrectLevel","modules","moduleCount","dataCache","dataList","getLength","buffer","write","put","addData","newData","isDark","row","col","Error","getModuleCount","make","makeImpl","getBestMaskPattern","test","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","c","minLostPoint","pattern","lostPoint","QRUtil","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","y","x","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","j","bits","getBCHTypeNumber","mod","floor","getBCHTypeInfo","inc","bitIndex","byteIndex","dark","getMask","PAD0","PAD1","rsBlocks","QRRSBlock","getRSBlocks","QRBitBuffer","getLengthInBits","totalDataCount","dataCount","putBit","createBytes","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","max","rsPoly","getErrorCorrectPolynomial","modPoly","QRPolynomial","modIndex","get","totalCodeCount","index","MODE_NUMBER","MODE_ALPHA_NUM","MODE_KANJI","QRErrorCorrectLevel","L","M","Q","H","QRMaskPattern","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","d","getBCHDigit","digit","errorCorrectLength","a","multiply","QRMath","gexp","qrCode","sameCount","count","darkCount","abs","glog","n","LOG_TABLE","EXP_TABLE","num","shift","undefined","e","ratio","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","bufIndex","bit","QRCodeLimitLength","_getAndroid","android","sAgent","navigator","userAgent","aMat","match","parseFloat","svgDrawer","Drawing","el","htOption","_el","_htOption","draw","oQRCode","nCount","width","height","makeSVG","tag","attrs","createElementNS","k","hasOwnProperty","setAttribute","clear","svg","colorLight","setAttributeNS","appendChild","colorDark","child","hasChildNodes","removeChild","lastChild","documentElement","tagName","toLowerCase","CanvasRenderingContext2D","nWidth","nHeight","aHTML","innerHTML","join","elTable","childNodes","nLeftMarginTable","offsetWidth","nTopMarginTable","offsetHeight","style","margin","_onMakeImage","_elImage","src","_elCanvas","toDataURL","display","_bIsPainted","_android","createElement","_oContext","getContext","alt","_bSupportDataURI","nRoundedWidth","nRoundedHeight","bIsDark","nLeft","nTop","strokeStyle","lineWidth","fillStyle","fillRect","strokeRect","ceil","makeImage","_safeSetDataURI","fSuccess","fFail","self","_fFail","_fSuccess","fOnError","call","onabort","onerror","onload","isPainted","clearRect","nNumber","_getTypeNumber","sText","nCorrectLevel","nType","_getUTF8Length","replacedText","encodeURI","replace","len","nLimit","vOption","correctLevel","text","getElementById","useSVG","_oQRCode","_oDrawing","makeCode","CorrectLevel","createQR","identity","target","origin","pathname","HostPage","Vue","component","methods","createToken","t","entrance","route","timer","newIdentity","window","confirm","reload","addPresentation","pres","clone","template","factory","ReconnectingWebSocket","onopen","event","onclose","onconnecting","onmessage","debugAll","CONNECTING","WebSocket","OPEN","CLOSING","CLOSED","url","protocols","options","settings","debug","automaticOpen","reconnectInterval","maxReconnectInterval","reconnectDecay","timeoutInterval","maxReconnectAttempts","binaryType","key","reconnectAttempts","readyState","protocol","ws","forcedClose","timedOut","eventTarget","generateEvent","s","args","evt","createEvent","initCustomEvent","addEventListener","bind","removeEventListener","dispatchEvent","open","reconnectAttempt","localWs","timeout","setTimeout","close","clearTimeout","isReconnect","reason","wasClean","pow","send","refresh","WS_URL","listeners","Map","websocket","initWebSocket","wsMessageHandler","message","transactionRef","interestedListeners","asset_id","transaction","forEach","listener","handler","addListener","assetIds","assetId","has","set","listenForTransactions","random","clearListener","idx","indexOf","splice","createVisitor","visitor","EntrancePage","txListeners","lastVisitorPubKey","created","newVisitor","beforeDestroy","host","PresentationList","props","Boolean","Function","presentations","runningPresentation","update","start","play","vote","$emit","p","VisitorPage","voteInProgress","finally","twoDigit","minsecs","totalsecs","mins","secs","TimerPage","_interval","runningForSecs","computed","granted","runnedOut","setInterval","step","clearInterval","result","KeyLoadPage","noTokensFound","href","catch","KeyLoadResultPage","NotFound","routes","app","currentRoute","hash","newRoute","history","pushState","ViewComponent","render","h"],"mappings":"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G,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG,EAAE,IAAI,IAAI,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,GAAG,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,GAAG,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAA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","file":"main.ed037893.js","sourceRoot":"..","sourcesContent":["export const API_BASE_URL = 'https://test.bigchaindb.com/api/v1/'\nexport const WS_BASE_URL = 'wss://test.bigchaindb.com:443/api/v1/'\n\nlet conn = new BigchainDB.Connection(API_BASE_URL)\nlet _me = null;\nloadOrCreateMe()\n\nexport function me() {\n    return _me\n}\n\nexport function setMe(newMe) {\n    _me = newMe\n    localStorage.setItem(\"me\", JSON.stringify(newMe))\n}\n\nexport function recreateMe() {\n    setMe(createIdentity())\n}\n\nexport function createIdentity() {\n    return new BigchainDB.Ed25519Keypair()\n}\n\nfunction loadOrCreateMe() {\n    if (document && document.location && document.location.search.startsWith(\"?keys=\")) {\n        const keys = document.location.search.substr(\"?keys=\".length).split(\",\")\n        setMe({\n            publicKey: keys[0],\n            privateKey: keys[1],\n            tokens: null\n        })\n        return\n    }\n    const storedMe = localStorage.getItem(\"me\")\n    if (storedMe) {\n        _me = JSON.parse(storedMe)\n    } else {\n        recreateMe()\n    }\n}\n\nexport function getTransaction(txId) {\n    const cached = localStorage.getItem(\"txcache_\" + txId)\n    if (cached) {\n        return Promise.resolve(JSON.parse(cached))\n    }\n    return conn.getTransaction(txId).then(tx => {\n        if (tx && tx.id) {\n            localStorage.setItem(\"txcache_\" + tx.id, JSON.stringify(tx))\n        }\n        return tx\n    })\n}\n\nexport function simpleOutput(publicKey, amount) {\n    return BigchainDB.Transaction.makeOutput(\n        BigchainDB.Transaction.makeEd25519Condition(publicKey), amount)\n}\n\nexport function postTransaction(tx) {\n    const txSigned = BigchainDB.Transaction.signTransaction(tx, me().privateKey)\n    return conn.postTransactionCommit(txSigned)\n}\n\nexport function listOutputs(publicKey) {\n    return conn.listOutputs(publicKey, false)\n}\n\nexport function searchAssets(search) {\n    return conn.searchAssets(search)\n}\n\nexport function searchMetadata(search) {\n    return conn.searchMetadata(search)\n}\n\nexport function populateWithAsset(transferTx) {\n    if (!transferTx) {\n        return null\n    }\n    return getTransaction(transferTx.asset.id).then(assetTx => {\n        assetTx.asset.id = transferTx.asset.id\n        transferTx.asset = assetTx.asset\n        return transferTx\n    })\n}\n\nfunction filetime_to_unixtimems(ft) {\n    const epoch_diff = 116444736000000000;\n    const rate_diff = 10000;\n    return Math.round((ft - epoch_diff) / rate_diff);\n}\n\nconst syncedTS = {\n    serverTS: 0,\n    clientTS: 0\n}\n\nexport function synchChainTime() {\n    const beforeTS = Date.now()\n    let clientTS = 0\n    fetch(\"http://worldclockapi.com/api/json/utc/now\").then(response => {\n        clientTS = Math.round((Date.now() + beforeTS) / 2)\n        return response.json()\n    }).then(data => {\n        syncedTS.serverTS = filetime_to_unixtimems(Number(data.currentFileTime))\n        syncedTS.clientTS = clientTS\n    })\n}\nsynchChainTime()\n\nexport function getChainSynchedTS() {\n    return Date.now() - syncedTS.clientTS + syncedTS.serverTS\n}\n\nexport function getChainTimeMillis() {\n    return Math.round(getChainSynchedTS() / 1000)\n}","import {\n    me,\n    postTransaction,\n    getTransaction,\n    listOutputs,\n    createIdentity,\n    setMe,\n    simpleOutput\n} from \"./chain.js\"\n\nexport let selectedToken = null\n\nexport function tokenLaunch(nTokens=1000000) {\n    const creator = me()\n    const tx = BigchainDB.Transaction.makeCreateTransaction({\n            token: 'BPNT Time Token',\n            number_tokens: nTokens\n        },\n        {\n            datetime: new Date().toString()\n        },\n        [simpleOutput(creator.publicKey, nTokens.toString())],\n        creator.publicKey\n    )\n\n    return postTransaction(tx).then(res => {\n        selectToken({\n            id: res.id,\n            tokensLeft: nTokens,\n            creator: creator,\n            createTx: res,\n        })\n        return selectedToken\n    })\n}\n\nfunction findSourceTxForAmount(txs, amount) {\n    return txs.find(tx => Number(tx.outputs[tx.ownerOutputIdx].amount) >= amount)\n}\n\nexport function giveTokens(token, receiverPubKey, amount, metadata = null) {\n   return getOwnedTokens(me().publicKey).then(ownedTokens => {\n       const sourceTx = findSourceTxForAmount(ownedTokens.transactions, amount)\n       const sourceAmount = Number(sourceTx.outputs[sourceTx.ownerOutputIdx].amount)\n       if (sourceAmount < amount) {\n           console.error(\"Source transaction does not contain \" + amount + \" tokens\", sourceTx)\n           return\n       }\n       const remaining = sourceAmount - amount;\n       const outputs = []\n       if (remaining > 0) {\n           outputs.push(simpleOutput(me().publicKey, (remaining).toString()))\n       }\n       outputs.push(simpleOutput(receiverPubKey, amount.toString()))\n       const tx = BigchainDB.Transaction.makeTransferTransaction(\n            [{\n                tx: sourceTx,// TODO: handle multiple unspent outputs (if needed)\n                output_index: sourceTx.ownerOutputIdx\n            }],\n            outputs,\n            metadata\n        )\n\n        return postTransaction(tx).then(tx => {\n            token.tokensLeft -= amount\n            selectToken(token)\n            return tx\n        })\n    })\n}\n\n//TODO filter by token type\nexport function getOwnedTokens(publicKey) {\n    return listOutputs(publicKey).then(outputs => {\n        return Promise.all(outputs.map(output => getTransaction(output.transaction_id))).then(txs => {\n            let total = 0;\n            for (let i = 0; i < outputs.length; i++) {\n                txs[i].ownerOutputIdx = outputs[i].output_index\n                txs[i].ownerOutput = txs[i].outputs[outputs[i].output_index]\n                total += Number(txs[i].ownerOutput.amount)\n            }\n            return {\n                total,\n                transactions: txs\n            }\n        })\n    })\n}\nexport function transferAllToNewIdentity() {\n    const newMe = createIdentity()\n    return getOwnedTokens(me().publicKey).then(ownedTokens => {\n       return giveTokens(selectedToken, newMe.publicKey, ownedTokens.total).then(() => {\n           setMe(newMe)\n       })\n    })\n}\n\nexport function selectToken(token) {\n    selectedToken = token\n    saveSelectedToken()\n    return token\n}\n\nexport function selectTokenById(tokenId) {\n    return getTransaction(tokenId).then(createTx => {\n        return selectToken({\n            createTx,\n            id: createTx.id,\n            creator: { publicKey: createTx.inputs[0].owners_before[0] },\n            tokensLeft: 'Unknown'\n        })\n    })\n}\n\nfunction saveSelectedToken() {\n    localStorage.setItem(\"currentToken\", JSON.stringify(selectedToken))\n}\n\nexport function dropSelectedToken() {\n    localStorage.removeItem(\"currentToken\")\n}\n\nfunction loadSelectedToken() {\n    const token = localStorage.getItem(\"currentToken\")\n    if (token) {\n        selectToken(JSON.parse(token))\n    }\n}\n\nloadSelectedToken()","import {getOwnedTokens, giveTokens, selectedToken} from \"./token.js\"\nimport {\n    createIdentity,\n    me,\n    postTransaction,\n    searchAssets,\n    getTransaction,\n    searchMetadata,\n    populateWithAsset,\n    getChainTimeMillis, simpleOutput\n} from \"./chain.js\"\n\nconst PRESENTATION_STARTED= \"presentation_started\"\nconst PRESENTATION = \"presentation\"\n\nexport function findPresentations() {\n    return searchAssets(PRESENTATION).then(assets => {\n        return Promise.all(assets.filter(asset => {\n            return asset.data.token === selectedToken.id\n        }).map(asset => getTransaction(asset.id)))\n    })\n}\n\nexport function createPresentation(presenterName, title, abstract) {\n    const presenter = createIdentity()\n    const creator = me()\n    const presentation = {\n        type: PRESENTATION,\n        presenterName,\n        title,\n        abstract,\n        presenterPublicKey: presenter.publicKey,\n        token: selectedToken.id,\n    }\n    const tx = BigchainDB.Transaction.makeCreateTransaction(\n        presentation,\n        {\n            datetime: new Date().toString()\n        },\n        [simpleOutput(creator.publicKey)],\n        creator.publicKey\n    )\n    return postTransaction(tx)\n}\n\nexport function startPresentation(presentation, grantedLength = 240) {\n    const timeStamp = getChainTimeMillis()\n    const tx = BigchainDB.Transaction.makeTransferTransaction(\n        [{tx: presentation, output_index: 0}],\n        [simpleOutput(me().publicKey)],\n        {\n            state: PRESENTATION_STARTED,\n            startTS: timeStamp,\n            ts: timeStamp,\n            token: presentation.asset.data.token,\n            grantedLength\n        }\n    )\n    return postTransaction(tx)\n}\n\nexport function grantTime(presentation, grantedLength = 20, usedTokens = 0) {\n    const timeStamp =getChainTimeMillis()\n    const tx = BigchainDB.Transaction.makeTransferTransaction(\n        [{tx: presentation, output_index: 0}],\n        [simpleOutput(me().publicKey)],\n        {\n            state: PRESENTATION_STARTED,\n            startTS: presentation.metadata.startTS,\n            ts: timeStamp,\n            token: presentation.asset.data.token,\n            grantedLength: Number(presentation.metadata.grantedLength) + Number(grantedLength),\n            usedTokens\n        }\n    )\n    return postTransaction(tx)\n}\n\nexport function collectedVotesDuringLastPeriod(presentation) {\n    const presenterPublicKey = presentation.asset.data.presenterPublicKey\n    return getOwnedTokens(presenterPublicKey).then(tokens => {\n        return tokens.total - (presentation.metadata.usedTokens || 0)\n    })\n}\n\nexport function autoGrant(presentation, neededNewTokens = 1, grantedLength = 60) {\n    return collectedVotesDuringLastPeriod(presentation).then(tokens => {\n        if (tokens >= neededNewTokens) {\n            console.log(\"Granting \" + grantedLength + \" secs on \" + tokens + \" votes.\")\n            return grantTime(presentation, grantedLength, tokens + (presentation.metadata.usedTokens || 0))\n        } else {\n            console.log(String(tokens) + \" votes are not enough...\")\n        }\n    })\n}\n\nexport function findRunningPresentation() {\n    return searchMetadata(PRESENTATION_STARTED).then(txs => {\n        const filtered = txs.filter(tx => {\n            return tx.metadata.token === selectedToken.id\n        })\n        let found = null\n        let maxTS = -Infinity\n        for (let i = 0; i < filtered.length; i++) {\n            if (filtered[i].metadata.ts > maxTS) {\n                found = filtered[i]\n                maxTS = filtered[i].metadata.ts\n            }\n        }\n        return found && maxTS > getChainTimeMillis() - found.metadata.grantedLength ? getTransaction(found.id) : null\n    }).then(populateWithAsset)\n}\n\nexport function voteForRunning() {\n    return findRunningPresentation().then(running => {\n        if (!running) {\n            alert(\"No active presentation found\")\n            return\n        }\n        return giveTokens(selectedToken, running.asset.data.presenterPublicKey, 1)\n    })\n}","\nvar _QRCode;\n\n(function () {\n    //---------------------------------------------------------------------\n    // _QRCode for JavaScript\n    //\n    // Copyright (c) 2009 Kazuhiko Arase\n    //\n    // URL: http://www.d-project.com/\n    //\n    // Licensed under the MIT license:\n    //   http://www.opensource.org/licenses/mit-license.php\n    //\n    // The word \"QR Code\" is registered trademark of\n    // DENSO WAVE INCORPORATED\n    //   http://www.denso-wave.com/qrcode/faqpatent-e.html\n    //\n    //---------------------------------------------------------------------\n    function QR8bitByte(data) {\n        this.mode = QRMode.MODE_8BIT_BYTE;\n        this.data = data;\n        this.parsedData = [];\n\n        // Added to support UTF-8 Characters\n        for (var i = 0, l = this.data.length; i < l; i++) {\n            var byteArray = [];\n            var code = this.data.charCodeAt(i);\n\n            if (code > 0x10000) {\n                byteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\n                byteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\n                byteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\n                byteArray[3] = 0x80 | (code & 0x3F);\n            } else if (code > 0x800) {\n                byteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\n                byteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\n                byteArray[2] = 0x80 | (code & 0x3F);\n            } else if (code > 0x80) {\n                byteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\n                byteArray[1] = 0x80 | (code & 0x3F);\n            } else {\n                byteArray[0] = code;\n            }\n\n            this.parsedData.push(byteArray);\n        }\n\n        this.parsedData = Array.prototype.concat.apply([], this.parsedData);\n\n        if (this.parsedData.length != this.data.length) {\n            this.parsedData.unshift(191);\n            this.parsedData.unshift(187);\n            this.parsedData.unshift(239);\n        }\n    }\n\n    QR8bitByte.prototype = {\n        getLength: function (buffer) {\n            return this.parsedData.length;\n        },\n        write: function (buffer) {\n            for (var i = 0, l = this.parsedData.length; i < l; i++) {\n                buffer.put(this.parsedData[i], 8);\n            }\n        }\n    };\n\n    function QRCodeModel(typeNumber, errorCorrectLevel) {\n        this.typeNumber = typeNumber;\n        this.errorCorrectLevel = errorCorrectLevel;\n        this.modules = null;\n        this.moduleCount = 0;\n        this.dataCache = null;\n        this.dataList = [];\n    }\n\n    QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null;},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+\",\"+col);}\n            return this.modules[row][col];},getModuleCount:function(){return this.moduleCount;},make:function(){this.makeImpl(false,this.getBestMaskPattern());},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null;}}\n            this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test);}\n            if(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList);}\n            this.mapData(this.dataCache,maskPattern);},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i;}}\n            return pattern;},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill();}}}\n            return qr_mc;},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue;}\n            this.modules[r][6]=(r%2==0);}\n            for(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue;}\n                this.modules[6][c]=(c%2==0);}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue;}\n            for(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod;}\n            for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod;}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod;}else if(i<8){this.modules[i+1][8]=mod;}else{this.modules[this.moduleCount-15+i][8]=mod;}}\n            for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod;}else if(i<9){this.modules[8][15-i-1+1]=mod;}else{this.modules[8][15-i-1]=mod;}}\n            this.modules[this.moduleCount-8][8]=(!test);},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(((data[byteIndex]>>>bitIndex)&1)==1);}\n            var mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark;}\n            this.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7;}}}\n            row+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break;}}}}};QRCodeModel.PAD0=0xEC;QRCodeModel.PAD1=0x11;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer);}\n        var totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount;}\n        if(buffer.getLengthInBits()>totalDataCount*8){throw new Error(\"code length overflow. (\"\n            +buffer.getLengthInBits()\n            +\">\"\n            +totalDataCount*8\n            +\")\");}\n        if(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4);}\n        while(buffer.getLengthInBits()%8!=0){buffer.putBit(false);}\n        while(true){if(buffer.getLengthInBits()>=totalDataCount*8){break;}\n            buffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break;}\n            buffer.put(QRCodeModel.PAD1,8);}\n        return QRCodeModel.createBytes(buffer,rsBlocks);};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=0xff&buffer.buffer[i+offset];}\n        offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0;}}\n        var totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount;}\n        var data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i];}}}\n        for(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i];}}}\n        return data;};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)));}\n            return((data<<10)|d)^QRUtil.G15_MASK;},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)));}\n            return(data<<12)|d;},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1;}\n            return digit;},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1];},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error(\"bad maskPattern:\"+maskPattern);}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));}\n            return a;},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error(\"mode:\"+mode);}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error(\"mode:\"+mode);}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error(\"mode:\"+mode);}}else{throw new Error(\"type:\"+type);}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue;}\n            for(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue;}\n                if(r==0&&c==0){continue;}\n                if(dark==qrCode.isDark(row+r,col+c)){sameCount++;}}}\n            if(sameCount>5){lostPoint+=(3+sameCount-5);}}}\n            for(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3;}}}\n            for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40;}}}\n            for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40;}}}\n            var darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++;}}}\n            var ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint;}};var QRMath={glog:function(n){if(n<1){throw new Error(\"glog(\"+n+\")\");}\n            return QRMath.LOG_TABLE[n];},gexp:function(n){while(n<0){n+=255;}\n            while(n>=256){n-=255;}\n            return QRMath.EXP_TABLE[n];},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i;}\n    for(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];}\n    for(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;}\n    function QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+\"/\"+shift);}\n        var offset=0;while(offset<num.length&&num[offset]==0){offset++;}\n        this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset];}}\n    QRPolynomial.prototype={get:function(index){return this.num[index];},getLength:function(){return this.num.length;},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));}}\n            return new QRPolynomial(num,0);},mod:function(e){if(this.getLength()-e.getLength()<0){return this;}\n            var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i);}\n            for(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);}\n            return new QRPolynomial(num,0).mod(e);}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount;}\n    QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error(\"bad rs block @ typeNumber:\"+typeNumber+\"/errorCorrectLevel:\"+errorCorrectLevel);}\n        var length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount));}}\n        return list;};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined;}};function QRBitBuffer(){this.buffer=[];this.length=0;}\n    QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1;},put:function(num,length){for(var i=0;i<length;i++){this.putBit(((num>>>(length-i-1))&1)==1);}},getLengthInBits:function(){return this.length;},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0);}\n            if(bit){this.buffer[bufIndex]|=(0x80>>>(this.length%8));}\n            this.length++;}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];\n\n    function _isSupportCanvas() {\n        return typeof CanvasRenderingContext2D != \"undefined\";\n    }\n\n    // android 2.x doesn't support Data-URI spec\n    function _getAndroid() {\n        var android = false;\n        var sAgent = navigator.userAgent;\n\n        if (/android/i.test(sAgent)) { // android\n            android = true;\n            var aMat = sAgent.toString().match(/android ([0-9]\\.[0-9])/i);\n\n            if (aMat && aMat[1]) {\n                android = parseFloat(aMat[1]);\n            }\n        }\n\n        return android;\n    }\n\n    var svgDrawer = (function() {\n\n        var Drawing = function (el, htOption) {\n            this._el = el;\n            this._htOption = htOption;\n        };\n\n        Drawing.prototype.draw = function (oQRCode) {\n            var _htOption = this._htOption;\n            var _el = this._el;\n            var nCount = oQRCode.getModuleCount();\n            var nWidth = Math.floor(_htOption.width / nCount);\n            var nHeight = Math.floor(_htOption.height / nCount);\n\n            this.clear();\n\n            function makeSVG(tag, attrs) {\n                var el = document.createElementNS('http://www.w3.org/2000/svg', tag);\n                for (var k in attrs)\n                    if (attrs.hasOwnProperty(k)) el.setAttribute(k, attrs[k]);\n                return el;\n            }\n\n            var svg = makeSVG(\"svg\" , {'viewBox': '0 0 ' + String(nCount) + \" \" + String(nCount), 'width': '100%', 'height': '100%', 'fill': _htOption.colorLight});\n            svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n            _el.appendChild(svg);\n\n            svg.appendChild(makeSVG(\"rect\", {\"fill\": _htOption.colorLight, \"width\": \"100%\", \"height\": \"100%\"}));\n            svg.appendChild(makeSVG(\"rect\", {\"fill\": _htOption.colorDark, \"width\": \"1\", \"height\": \"1\", \"id\": \"template\"}));\n\n            for (var row = 0; row < nCount; row++) {\n                for (var col = 0; col < nCount; col++) {\n                    if (oQRCode.isDark(row, col)) {\n                        var child = makeSVG(\"use\", {\"x\": String(col), \"y\": String(row)});\n                        child.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", \"#template\")\n                        svg.appendChild(child);\n                    }\n                }\n            }\n        };\n        Drawing.prototype.clear = function () {\n            while (this._el.hasChildNodes())\n                this._el.removeChild(this._el.lastChild);\n        };\n        return Drawing;\n    })();\n\n    var useSVG = document.documentElement.tagName.toLowerCase() === \"svg\";\n\n    // Drawing in DOM by using Table tag\n    var Drawing = useSVG ? svgDrawer : !_isSupportCanvas() ? (function () {\n        var Drawing = function (el, htOption) {\n            this._el = el;\n            this._htOption = htOption;\n        };\n\n        /**\n         * Draw the _QRCode\n         *\n         * @param {_QRCode} oQRCode\n         */\n        Drawing.prototype.draw = function (oQRCode) {\n            var _htOption = this._htOption;\n            var _el = this._el;\n            var nCount = oQRCode.getModuleCount();\n            var nWidth = Math.floor(_htOption.width / nCount);\n            var nHeight = Math.floor(_htOption.height / nCount);\n            var aHTML = ['<table style=\"border:0;border-collapse:collapse;\">'];\n\n            for (var row = 0; row < nCount; row++) {\n                aHTML.push('<tr>');\n\n                for (var col = 0; col < nCount; col++) {\n                    aHTML.push('<td style=\"border:0;border-collapse:collapse;padding:0;margin:0;width:' + nWidth + 'px;height:' + nHeight + 'px;background-color:' + (oQRCode.isDark(row, col) ? _htOption.colorDark : _htOption.colorLight) + ';\"></td>');\n                }\n\n                aHTML.push('</tr>');\n            }\n\n            aHTML.push('</table>');\n            _el.innerHTML = aHTML.join('');\n\n            // Fix the margin values as real size.\n            var elTable = _el.childNodes[0];\n            var nLeftMarginTable = (_htOption.width - elTable.offsetWidth) / 2;\n            var nTopMarginTable = (_htOption.height - elTable.offsetHeight) / 2;\n\n            if (nLeftMarginTable > 0 && nTopMarginTable > 0) {\n                elTable.style.margin = nTopMarginTable + \"px \" + nLeftMarginTable + \"px\";\n            }\n        };\n\n        /**\n         * Clear the _QRCode\n         */\n        Drawing.prototype.clear = function () {\n            this._el.innerHTML = '';\n        };\n\n        return Drawing;\n    })() : (function () { // Drawing in Canvas\n        function _onMakeImage() {\n            this._elImage.src = this._elCanvas.toDataURL(\"image/png\");\n            this._elImage.style.display = \"block\";\n            this._elCanvas.style.display = \"none\";\n        }\n\n        /**\n         * Check whether the user's browser supports Data URI or not\n         *\n         * @private\n         * @param {Function} fSuccess Occurs if it supports Data URI\n         * @param {Function} fFail Occurs if it doesn't support Data URI\n         */\n        function _safeSetDataURI(fSuccess, fFail) {\n            var self = this;\n            self._fFail = fFail;\n            self._fSuccess = fSuccess;\n\n            // Check it just once\n            if (self._bSupportDataURI === null) {\n                var el = document.createElement(\"img\");\n                var fOnError = function() {\n                    self._bSupportDataURI = false;\n\n                    if (self._fFail) {\n                        self._fFail.call(self);\n                    }\n                };\n                var fOnSuccess = function() {\n                    self._bSupportDataURI = true;\n\n                    if (self._fSuccess) {\n                        self._fSuccess.call(self);\n                    }\n                };\n\n                el.onabort = fOnError;\n                el.onerror = fOnError;\n                el.onload = fOnSuccess;\n                el.src = \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\"; // the Image contains 1px data.\n                return;\n            } else if (self._bSupportDataURI === true && self._fSuccess) {\n                self._fSuccess.call(self);\n            } else if (self._bSupportDataURI === false && self._fFail) {\n                self._fFail.call(self);\n            }\n        };\n\n        /**\n         * Drawing _QRCode by using canvas\n         *\n         * @constructor\n         * @param {HTMLElement} el\n         * @param {Object} htOption _QRCode Options\n         */\n        var Drawing = function (el, htOption) {\n            this._bIsPainted = false;\n            this._android = _getAndroid();\n\n            this._htOption = htOption;\n            this._elCanvas = document.createElement(\"canvas\");\n            this._elCanvas.width = htOption.width;\n            this._elCanvas.height = htOption.height;\n            el.appendChild(this._elCanvas);\n            this._el = el;\n            this._oContext = this._elCanvas.getContext(\"2d\");\n            this._bIsPainted = false;\n            this._elImage = document.createElement(\"img\");\n            this._elImage.alt = \"Scan me!\";\n            this._elImage.style.display = \"none\";\n            this._el.appendChild(this._elImage);\n            this._bSupportDataURI = null;\n        };\n\n        /**\n         * Draw the _QRCode\n         *\n         * @param {_QRCode} oQRCode\n         */\n        Drawing.prototype.draw = function (oQRCode) {\n            var _elImage = this._elImage;\n            var _oContext = this._oContext;\n            var _htOption = this._htOption;\n\n            var nCount = oQRCode.getModuleCount();\n            var nWidth = _htOption.width / nCount;\n            var nHeight = _htOption.height / nCount;\n            var nRoundedWidth = Math.round(nWidth);\n            var nRoundedHeight = Math.round(nHeight);\n\n            _elImage.style.display = \"none\";\n            this.clear();\n\n            for (var row = 0; row < nCount; row++) {\n                for (var col = 0; col < nCount; col++) {\n                    var bIsDark = oQRCode.isDark(row, col);\n                    var nLeft = col * nWidth;\n                    var nTop = row * nHeight;\n                    _oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\n                    _oContext.lineWidth = 1;\n                    _oContext.fillStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\n                    _oContext.fillRect(nLeft, nTop, nWidth, nHeight);\n\n                    //    \n                    _oContext.strokeRect(\n                        Math.floor(nLeft) + 0.5,\n                        Math.floor(nTop) + 0.5,\n                        nRoundedWidth,\n                        nRoundedHeight\n                    );\n\n                    _oContext.strokeRect(\n                        Math.ceil(nLeft) - 0.5,\n                        Math.ceil(nTop) - 0.5,\n                        nRoundedWidth,\n                        nRoundedHeight\n                    );\n                }\n            }\n\n            this._bIsPainted = true;\n        };\n\n        /**\n         * Make the image from Canvas if the browser supports Data URI.\n         */\n        Drawing.prototype.makeImage = function () {\n            if (this._bIsPainted) {\n                _safeSetDataURI.call(this, _onMakeImage);\n            }\n        };\n\n        /**\n         * Return whether the _QRCode is painted or not\n         *\n         * @return {Boolean}\n         */\n        Drawing.prototype.isPainted = function () {\n            return this._bIsPainted;\n        };\n\n        /**\n         * Clear the _QRCode\n         */\n        Drawing.prototype.clear = function () {\n            this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);\n            this._bIsPainted = false;\n        };\n\n        /**\n         * @private\n         * @param {Number} nNumber\n         */\n        Drawing.prototype.round = function (nNumber) {\n            if (!nNumber) {\n                return nNumber;\n            }\n\n            return Math.floor(nNumber * 1000) / 1000;\n        };\n\n        return Drawing;\n    })();\n\n    /**\n     * Get the type by string length\n     *\n     * @private\n     * @param {String} sText\n     * @param {Number} nCorrectLevel\n     * @return {Number} type\n     */\n    function _getTypeNumber(sText, nCorrectLevel) {\n        var nType = 1;\n        var length = _getUTF8Length(sText);\n\n        for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n            var nLimit = 0;\n\n            switch (nCorrectLevel) {\n                case QRErrorCorrectLevel.L :\n                    nLimit = QRCodeLimitLength[i][0];\n                    break;\n                case QRErrorCorrectLevel.M :\n                    nLimit = QRCodeLimitLength[i][1];\n                    break;\n                case QRErrorCorrectLevel.Q :\n                    nLimit = QRCodeLimitLength[i][2];\n                    break;\n                case QRErrorCorrectLevel.H :\n                    nLimit = QRCodeLimitLength[i][3];\n                    break;\n            }\n\n            if (length <= nLimit) {\n                break;\n            } else {\n                nType++;\n            }\n        }\n\n        if (nType > QRCodeLimitLength.length) {\n            throw new Error(\"Too long data\");\n        }\n\n        return nType;\n    }\n\n    function _getUTF8Length(sText) {\n        var replacedText = encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g, 'a');\n        return replacedText.length + (replacedText.length != sText ? 3 : 0);\n    }\n\n    /**\n     * @class _QRCode\n     * @constructor\n     * @example\n     * new _QRCode(document.getElementById(\"test\"), \"http://jindo.dev.naver.com/collie\");\n     *\n     * @example\n     * var oQRCode = new _QRCode(\"test\", {\n     *    text : \"http://naver.com\",\n     *    width : 128,\n     *    height : 128\n     * });\n     *\n     * oQRCode.clear(); // Clear the _QRCode.\n     * oQRCode.makeCode(\"http://map.naver.com\"); // Re-create the _QRCode.\n     *\n     * @param {HTMLElement|String} el target element or 'id' attribute of element.\n     * @param {Object|String} vOption\n     * @param {String} vOption.text _QRCode link data\n     * @param {Number} [vOption.width=256]\n     * @param {Number} [vOption.height=256]\n     * @param {String} [vOption.colorDark=\"#000000\"]\n     * @param {String} [vOption.colorLight=\"#ffffff\"]\n     * @param {_QRCode.CorrectLevel} [vOption.correctLevel=_QRCode.CorrectLevel.H] [L|M|Q|H]\n     */\n    _QRCode = function (el, vOption) {\n        this._htOption = {\n            width : 256,\n            height : 256,\n            typeNumber : 4,\n            colorDark : \"#000000\",\n            colorLight : \"#ffffff\",\n            correctLevel : QRErrorCorrectLevel.H\n        };\n\n        if (typeof vOption === 'string') {\n            vOption\t= {\n                text : vOption\n            };\n        }\n\n        // Overwrites options\n        if (vOption) {\n            for (var i in vOption) {\n                this._htOption[i] = vOption[i];\n            }\n        }\n\n        if (typeof el == \"string\") {\n            el = document.getElementById(el);\n        }\n\n        if (this._htOption.useSVG) {\n            Drawing = svgDrawer;\n        }\n\n        this._android = _getAndroid();\n        this._el = el;\n        this._oQRCode = null;\n        this._oDrawing = new Drawing(this._el, this._htOption);\n\n        if (this._htOption.text) {\n            this.makeCode(this._htOption.text);\n        }\n    };\n\n    /**\n     * Make the _QRCode\n     *\n     * @param {String} sText link data\n     */\n    _QRCode.prototype.makeCode = function (sText) {\n        this._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);\n        this._oQRCode.addData(sText);\n        this._oQRCode.make();\n        this._el.title = sText;\n        this._oDrawing.draw(this._oQRCode);\n        this.makeImage();\n    };\n\n    /**\n     * Make the Image from Canvas element\n     * - It occurs automatically\n     * - Android below 3 doesn't support Data-URI spec.\n     *\n     * @private\n     */\n    _QRCode.prototype.makeImage = function () {\n        if (typeof this._oDrawing.makeImage == \"function\" && (!this._android || this._android >= 3)) {\n            this._oDrawing.makeImage();\n        }\n    };\n\n    /**\n     * Clear the _QRCode\n     */\n    _QRCode.prototype.clear = function () {\n        this._oDrawing.clear();\n    };\n\n    /**\n     * @name _QRCode.CorrectLevel\n     */\n    _QRCode.CorrectLevel = QRErrorCorrectLevel;\n})();\n\nexport function QRCode() {\n    return _QRCode.apply(this, arguments)\n}\n\nQRCode.prototype = _QRCode.prototype\nQRCode.CorrectLevel = _QRCode.CorrectLevel","import {QRCode} from \"../lib/qrcode.js\";\n\nexport function createQR(identity) {\n    const target =  location.origin + location.pathname + \"?keys=\" + identity.publicKey + \",\" + identity.privateKey + \"#keyload\"\n    console.log(target)\n    document.getElementById(\"qrcode\").innerHTML = '';\n    const qrcode = new QRCode(document.getElementById(\"qrcode\"), {\n        text: target,\n        width: 384,\n        height: 384,\n        colorDark : \"#000000\",\n        colorLight : \"#ffffff\",\n        correctLevel : QRCode.CorrectLevel.H\n    })\n}","import {me, recreateMe} from \"../model/chain.js\"\nimport {tokenLaunch, selectedToken, dropSelectedToken} from \"../model/token.js\"\nimport {app} from \"../main.js\"\nimport {createPresentation} from \"../model/presentation.js\"\nimport {createQR} from \"./qr.js\";\n\nexport const HostPage = Vue.component('host-page', {\n    data: function () {\n        return {\n            token: selectedToken,\n            presenterName: null,\n            title: null,\n            abstract: null\n        }\n    },\n    methods: {\n        createToken: function() {\n            return tokenLaunch().then(t => {\n                this.token = t\n                console.log(\"Token created: \" + t.id)\n            })\n        },\n        entrance: function() {\n            app.route(\"entrance\")\n        },\n        timer: function() {\n            app.route(\"timer\")\n        },\n        newIdentity: function() {\n            if (window.confirm(\"Are you sure to create new identity?\")) {\n                recreateMe()\n                dropSelectedToken()\n                location.reload()\n            }\n        },\n        addPresentation: function() {\n            createPresentation(this.presenterName, this.title, this.abstract).then(pres =>\n            {\n                document.location.reload()\n            })\n        },\n        clone: function() {\n            createQR(me())\n        }\n    },\n    template: `\n  <v-content>\n    <v-container fluid>\n    <div>\n        <v-btn v-if=\"!token\" @click=\"createToken()\">Create Token</v-btn>\n        <div>\n            <span v-if=\"token\">Token: {{token.id}}</span>\n            <a href=\"\" @click=\"newIdentity()\">New Identity</a>\n        </div>\n        <v-btn @click=\"entrance()\" v-if=\"token\">Entrance View</v-btn>\n        <v-btn @click=\"timer()\" v-if=\"token\">Timer View</v-btn>\n        <div v-if=\"token\">\n            <h3>Presentations</h3>\n            <presentation-list host=\"true\"></presentation-list>\n            <h3>Create Presentation</h3>\n            <v-form>\n                <v-text-field v-model=\"presenterName\" placeholder=\"Presenter\" single-line></v-text-field>\n                <v-text-field v-model=\"title\" placeholder=\"Title\"></v-text-field>\n                <v-textarea v-model=\"abstract\" placeholder=\"Abstract\"></v-textarea>\n                <v-btn v-if=\"title\" @click=\"addPresentation()\">Create Presentation</v-btn>        \n            </v-form>\n        </div>\n        <v-btn @click=\"clone()\">Clone identity</v-btn>        \n        <div id=\"qrcode\" style=\"margin: 20px\"></div>        \n    </div>\n    </v-container>\n</v-content>\n`\n})","// MIT License:\n//\n// Copyright (c) 2010-2012, Joe Walnes\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/**\n * This behaves like a WebSocket in every way, except if it fails to connect,\n * or it gets disconnected, it will repeatedly poll until it successfully connects\n * again.\n *\n * It is API compatible, so when you have:\n *   ws = new WebSocket('ws://....');\n * you can replace with:\n *   ws = new ReconnectingWebSocket('ws://....');\n *\n * The event stream will typically look like:\n *  onconnecting\n *  onopen\n *  onmessage\n *  onmessage\n *  onclose // lost connection\n *  onconnecting\n *  onopen  // sometime later...\n *  onmessage\n *  onmessage\n *  etc...\n *\n * It is API compatible with the standard WebSocket API, apart from the following members:\n *\n * - `bufferedAmount`\n * - `extensions`\n * - `binaryType`\n *\n * Latest version: https://github.com/joewalnes/reconnecting-websocket/\n * - Joe Walnes\n *\n * Syntax\n * ======\n * var socket = new ReconnectingWebSocket(url, protocols, options);\n *\n * Parameters\n * ==========\n * url - The url you are connecting to.\n * protocols - Optional string or array of protocols.\n * options - See below\n *\n * Options\n * =======\n * Options can either be passed upon instantiation or set after instantiation:\n *\n * var socket = new ReconnectingWebSocket(url, null, { debug: true, reconnectInterval: 4000 });\n *\n * or\n *\n * var socket = new ReconnectingWebSocket(url);\n * socket.debug = true;\n * socket.reconnectInterval = 4000;\n *\n * debug\n * - Whether this instance should log debug messages. Accepts true or false. Default: false.\n *\n * automaticOpen\n * - Whether or not the websocket should attempt to connect immediately upon instantiation. The socket can be manually opened or closed at any time using ws.open() and ws.close().\n *\n * reconnectInterval\n * - The number of milliseconds to delay before attempting to reconnect. Accepts integer. Default: 1000.\n *\n * maxReconnectInterval\n * - The maximum number of milliseconds to delay a reconnection attempt. Accepts integer. Default: 30000.\n *\n * reconnectDecay\n * - The rate of increase of the reconnect delay. Allows reconnect attempts to back off when problems persist. Accepts integer or float. Default: 1.5.\n *\n * timeoutInterval\n * - The maximum time in milliseconds to wait for a connection to succeed before closing and retrying. Accepts integer. Default: 2000.\n *\n */\nfunction factory() {\n\n    if (!('WebSocket' in window)) {\n        return;\n    }\n\n    function ReconnectingWebSocket(url, protocols, options) {\n\n        // Default settings\n        var settings = {\n\n            /** Whether this instance should log debug messages. */\n            debug: false,\n\n            /** Whether or not the websocket should attempt to connect immediately upon instantiation. */\n            automaticOpen: true,\n\n            /** The number of milliseconds to delay before attempting to reconnect. */\n            reconnectInterval: 1000,\n            /** The maximum number of milliseconds to delay a reconnection attempt. */\n            maxReconnectInterval: 30000,\n            /** The rate of increase of the reconnect delay. Allows reconnect attempts to back off when problems persist. */\n            reconnectDecay: 1.5,\n\n            /** The maximum time in milliseconds to wait for a connection to succeed before closing and retrying. */\n            timeoutInterval: 2000,\n\n            /** The maximum number of reconnection attempts to make. Unlimited if null. */\n            maxReconnectAttempts: null,\n\n            /** The binary type, possible values 'blob' or 'arraybuffer', default 'blob'. */\n            binaryType: 'blob'\n        }\n        if (!options) { options = {}; }\n\n        // Overwrite and define settings with options if they exist.\n        for (var key in settings) {\n            if (typeof options[key] !== 'undefined') {\n                this[key] = options[key];\n            } else {\n                this[key] = settings[key];\n            }\n        }\n\n        // These should be treated as read-only properties\n\n        /** The URL as resolved by the constructor. This is always an absolute URL. Read only. */\n        this.url = url;\n\n        /** The number of attempted reconnects since starting, or the last successful connection. Read only. */\n        this.reconnectAttempts = 0;\n\n        /**\n         * The current state of the connection.\n         * Can be one of: WebSocket.CONNECTING, WebSocket.OPEN, WebSocket.CLOSING, WebSocket.CLOSED\n         * Read only.\n         */\n        this.readyState = WebSocket.CONNECTING;\n\n        /**\n         * A string indicating the name of the sub-protocol the server selected; this will be one of\n         * the strings specified in the protocols parameter when creating the WebSocket object.\n         * Read only.\n         */\n        this.protocol = null;\n\n        // Private state variables\n\n        var self = this;\n        var ws;\n        var forcedClose = false;\n        var timedOut = false;\n        var eventTarget = document.createElement('div');\n\n        // Wire up \"on*\" properties as event handlers\n\n        eventTarget.addEventListener('open',       function(event) { self.onopen(event); });\n        eventTarget.addEventListener('close',      function(event) { self.onclose(event); });\n        eventTarget.addEventListener('connecting', function(event) { self.onconnecting(event); });\n        eventTarget.addEventListener('message',    function(event) { self.onmessage(event); });\n        eventTarget.addEventListener('error',      function(event) { self.onerror(event); });\n\n        // Expose the API required by EventTarget\n\n        this.addEventListener = eventTarget.addEventListener.bind(eventTarget);\n        this.removeEventListener = eventTarget.removeEventListener.bind(eventTarget);\n        this.dispatchEvent = eventTarget.dispatchEvent.bind(eventTarget);\n\n        /**\n         * This function generates an event that is compatible with standard\n         * compliant browsers and IE9 - IE11\n         *\n         * This will prevent the error:\n         * Object doesn't support this action\n         *\n         * http://stackoverflow.com/questions/19345392/why-arent-my-parameters-getting-passed-through-to-a-dispatched-event/19345563#19345563\n         * @param s String The name that the event should use\n         * @param args Object an optional object that the event will use\n         */\n        function generateEvent(s, args) {\n        \tvar evt = document.createEvent(\"CustomEvent\");\n        \tevt.initCustomEvent(s, false, false, args);\n        \treturn evt;\n        };\n\n        this.open = function (reconnectAttempt) {\n            ws = new WebSocket(self.url, protocols || []);\n            ws.binaryType = this.binaryType;\n\n            if (reconnectAttempt) {\n                if (this.maxReconnectAttempts && this.reconnectAttempts > this.maxReconnectAttempts) {\n                    return;\n                }\n            } else {\n                eventTarget.dispatchEvent(generateEvent('connecting'));\n                this.reconnectAttempts = 0;\n            }\n\n            if (self.debug || ReconnectingWebSocket.debugAll) {\n                console.debug('ReconnectingWebSocket', 'attempt-connect', self.url);\n            }\n\n            var localWs = ws;\n            var timeout = setTimeout(function() {\n                if (self.debug || ReconnectingWebSocket.debugAll) {\n                    console.debug('ReconnectingWebSocket', 'connection-timeout', self.url);\n                }\n                timedOut = true;\n                localWs.close();\n                timedOut = false;\n            }, self.timeoutInterval);\n\n            ws.onopen = function(event) {\n                clearTimeout(timeout);\n                if (self.debug || ReconnectingWebSocket.debugAll) {\n                    console.debug('ReconnectingWebSocket', 'onopen', self.url);\n                }\n                self.protocol = ws.protocol;\n                self.readyState = WebSocket.OPEN;\n                self.reconnectAttempts = 0;\n                var e = generateEvent('open');\n                e.isReconnect = reconnectAttempt;\n                reconnectAttempt = false;\n                eventTarget.dispatchEvent(e);\n            };\n\n            ws.onclose = function(event) {\n                clearTimeout(timeout);\n                ws = null;\n                if (forcedClose) {\n                    self.readyState = WebSocket.CLOSED;\n                    eventTarget.dispatchEvent(generateEvent('close'));\n                } else {\n                    self.readyState = WebSocket.CONNECTING;\n                    var e = generateEvent('connecting');\n                    e.code = event.code;\n                    e.reason = event.reason;\n                    e.wasClean = event.wasClean;\n                    eventTarget.dispatchEvent(e);\n                    if (!reconnectAttempt && !timedOut) {\n                        if (self.debug || ReconnectingWebSocket.debugAll) {\n                            console.debug('ReconnectingWebSocket', 'onclose', self.url);\n                        }\n                        eventTarget.dispatchEvent(generateEvent('close'));\n                    }\n\n                    var timeout = self.reconnectInterval * Math.pow(self.reconnectDecay, self.reconnectAttempts);\n                    setTimeout(function() {\n                        self.reconnectAttempts++;\n                        self.open(true);\n                    }, timeout > self.maxReconnectInterval ? self.maxReconnectInterval : timeout);\n                }\n            };\n            ws.onmessage = function(event) {\n                if (self.debug || ReconnectingWebSocket.debugAll) {\n                    console.debug('ReconnectingWebSocket', 'onmessage', self.url, event.data);\n                }\n                var e = generateEvent('message');\n                e.data = event.data;\n                eventTarget.dispatchEvent(e);\n            };\n            ws.onerror = function(event) {\n                if (self.debug || ReconnectingWebSocket.debugAll) {\n                    console.debug('ReconnectingWebSocket', 'onerror', self.url, event);\n                }\n                eventTarget.dispatchEvent(generateEvent('error'));\n            };\n        }\n\n        // Whether or not to create a websocket upon instantiation\n        if (this.automaticOpen == true) {\n            this.open(false);\n        }\n\n        /**\n         * Transmits data to the server over the WebSocket connection.\n         *\n         * @param data a text string, ArrayBuffer or Blob to send to the server.\n         */\n        this.send = function(data) {\n            if (ws) {\n                if (self.debug || ReconnectingWebSocket.debugAll) {\n                    console.debug('ReconnectingWebSocket', 'send', self.url, data);\n                }\n                return ws.send(data);\n            } else {\n                throw 'INVALID_STATE_ERR : Pausing to reconnect websocket';\n            }\n        };\n\n        /**\n         * Closes the WebSocket connection or connection attempt, if any.\n         * If the connection is already CLOSED, this method does nothing.\n         */\n        this.close = function(code, reason) {\n            // Default CLOSE_NORMAL code\n            if (typeof code == 'undefined') {\n                code = 1000;\n            }\n            forcedClose = true;\n            if (ws) {\n                ws.close(code, reason);\n            }\n        };\n\n        /**\n         * Additional public API method to refresh the connection if still open (close, re-open).\n         * For example, if the app suspects bad data / missed heart beats, it can try to refresh.\n         */\n        this.refresh = function() {\n            if (ws) {\n                ws.close();\n            }\n        };\n    }\n\n    /**\n     * An event listener to be called when the WebSocket connection's readyState changes to OPEN;\n     * this indicates that the connection is ready to send and receive data.\n     */\n    ReconnectingWebSocket.prototype.onopen = function(event) {};\n    /** An event listener to be called when the WebSocket connection's readyState changes to CLOSED. */\n    ReconnectingWebSocket.prototype.onclose = function(event) {};\n    /** An event listener to be called when a connection begins being attempted. */\n    ReconnectingWebSocket.prototype.onconnecting = function(event) {};\n    /** An event listener to be called when a message is received from the server. */\n    ReconnectingWebSocket.prototype.onmessage = function(event) {};\n    /** An event listener to be called when an error occurs. */\n    ReconnectingWebSocket.prototype.onerror = function(event) {};\n\n    /**\n     * Whether all instances of ReconnectingWebSocket should log debug messages.\n     * Setting this to true is the equivalent of setting all instances of ReconnectingWebSocket.debug to true.\n     */\n    ReconnectingWebSocket.debugAll = false;\n\n    ReconnectingWebSocket.CONNECTING = WebSocket.CONNECTING;\n    ReconnectingWebSocket.OPEN = WebSocket.OPEN;\n    ReconnectingWebSocket.CLOSING = WebSocket.CLOSING;\n    ReconnectingWebSocket.CLOSED = WebSocket.CLOSED;\n\n    return ReconnectingWebSocket;\n};\n\nexport const ReconnectingWebSocket = factory()\n","import {ReconnectingWebSocket} from \"../lib/reconnecting-websocket.js\"\nimport {getTransaction, WS_BASE_URL} from \"./chain.js\"\n\nconst WS_URL = WS_BASE_URL + \"streams/valid_transactions\"\n\nconst listeners = new Map()\nlet websocket = null\n\nfunction initWebSocket()\n{\n    websocket = new ReconnectingWebSocket(WS_URL)\n    websocket.onmessage = wsMessageHandler\n}\n\nfunction wsMessageHandler(message) {\n    const transactionRef = JSON.parse(message.data)\n    const interestedListeners = listeners.get(transactionRef.asset_id)\n    if (!interestedListeners) {\n        return\n    }\n    getTransaction(transactionRef.transaction_id).then(transaction => {\n        interestedListeners.forEach(listener => {\n            listener.handler(transaction)\n        })\n    })\n}\n\nfunction addListener(listener) {\n    listener.assetIds.forEach(assetId => {\n        listeners.has(assetId) || listeners.set(assetId, [])\n        listeners.get(assetId).push(listener)\n    })\n    return listener\n}\n\nexport function listenForTransactions(assetIds, handler) {\n    if (!websocket) initWebSocket()\n    return addListener({\n        assetIds,\n        handler,\n        id: String(Date.now()) + Math.random(),\n    })\n}\n\nexport function clearListener(listener) {\n    listener.assetIds.forEach(assetId => {\n        const idx = listeners.get(assetId).indexOf(listener)\n        if (idx !== -1) {\n            listeners.get(assetId).splice(idx, 1)\n        }\n    })\n}","import {app} from \"../main.js\"\nimport {createIdentity} from \"../model/chain.js\"\nimport {selectedToken,giveTokens} from \"../model/token.js\"\nimport {clearListener, listenForTransactions} from \"../model/chainevents.js\";\nimport {createQR} from \"./qr.js\";\n\nfunction createVisitor() {\n    const visitor = createIdentity()\n    return giveTokens(selectedToken, visitor.publicKey, 11).then(res => {\n        return visitor\n    })\n}\n\nexport const EntrancePage = Vue.component('entrance-page', {\n    data: function () {\n        return {\n            selectedToken,\n            txListeners: [],\n            lastVisitorPubKey: null\n        }\n    },\n    created: function() {\n        this.txListeners.push(listenForTransactions([selectedToken.id], (tx) => {\n            if (tx.inputs[0].owners_before[0] == this.lastVisitorPubKey) {\n                this.newVisitor()\n            }\n        }))\n        this.newVisitor()\n    },\n    beforeDestroy: function() {\n        this.txListeners.forEach(clearListener)\n    },\n    methods: {\n        newVisitor: function() {\n            createVisitor().then(visitor => {\n                createQR(visitor)\n                this.lastVisitorPubKey = visitor.publicKey\n            })\n        },\n        host: function() {\n            app.route(\"\")\n        }\n    },\n    template: `\n  <v-content>\n    <v-container fluid>\n<div>\n    <div v-if=\"!selectedToken\">No token found</div>\n    <div id=\"qrcode\" style=\"margin: 20px\"></div>\n    <v-btn v-if=\"selectedToken\" @click=\"newVisitor()\">New Visitor</v-btn>\n    <v-btn @click=\"host()\">Back to Host View</v-btn>\n</div>\n`\n})","import {selectedToken} from \"../model/token.js\";\nimport {findPresentations, findRunningPresentation, startPresentation} from \"../model/presentation.js\";\nimport {app} from \"../main.js\";\nimport {clearListener, listenForTransactions} from \"../model/chainevents.js\";\n\nexport const PresentationList = Vue.component('presentation-list', {\n    props: {\n        host: Boolean,\n        voteForRunning: Function\n    },\n    data: function () {\n        return {\n            presentations: [],\n            runningPresentation: null\n        }\n    },\n    methods: {\n        update: function() {\n            if (selectedToken) {\n                findPresentations().then(presentations => {\n                    this.presentations = presentations\n                }).then(() => {\n                    findRunningPresentation().then(running => {\n                        this.runningPresentation = running\n                    })\n                })\n            }\n        },\n        start: function(presentation) {\n            startPresentation(presentation).then(() => {\n                document.getElementById(\"bellSound\").play()\n                app.route(\"timer\")\n            })\n        },\n        vote: function() {\n            this.$emit(\"vote\")\n        }\n    },\n    created: function() {\n        this.txListeners = [];\n        this.update()\n        this.txListeners.push(listenForTransactions([selectedToken.id], this.update.bind(this)))\n        findPresentations().then(presentations => {\n            this.txListeners.push(listenForTransactions(presentations.map(p => p.id), this.update.bind(this)))\n        })\n    },\n    beforeDestroy: function() {\n        this.txListeners.forEach(clearListener)\n    },\n    template: `\n<v-content>\n    <v-container fluid>\n        <div>\n            <div v-if=\"runningPresentation\">Running presentation:\n                <div><b>{{ runningPresentation.asset.data.title }} - {{ runningPresentation.asset.data.presenterName }}</b></div> \n                <div>{{ runningPresentation.asset.data.abstract }}</div>\n                 <v-btn v-if=\"voteForRunning\" @click=\"vote()\">Vote</v-btn>\n            </div>\n            --\n            <ul>\n                <li v-for=\"pres in presentations\">\n                    <div><b>{{ pres.asset.data.title }} - {{ pres.asset.data.presenterName }}</b></div> \n                    <div>{{ pres.asset.data.abstract }}</div>\n                    <v-btn v-if=\"host\" @click=\"start(pres)\">Start</v-btn>\n                </li>\n            </ul>\n    </div>\n    </v-container>\n</v-content>\n    `\n})\n","import {selectedToken,getOwnedTokens,selectTokenById} from \"../model/token.js\"\nimport {setMe, me, getTransaction} from \"../model/chain.js\"\nimport {PresentationList} from \"./presentationlist.js\"\nimport {voteForRunning} from \"../model/presentation.js\";\n\nexport const VisitorPage = Vue.component('visitor-page', {\n    data: function () {\n        return {\n            selectedToken,\n            me: null,\n            tokens: null,\n            voteInProgress: false,\n        }\n    },\n    created: function() {\n        this.update()\n    },\n    methods: {\n        vote: function() {\n            this.voteInProgress = true\n            voteForRunning()\n                .finally(() => this.voteInProgress = false)\n                .then(this.update.bind(this))\n        },\n        update: function() {\n            this.me = me()\n            getOwnedTokens(me().publicKey).then(ownedTokens => {\n                this.tokens = ownedTokens\n                return selectTokenById(this.tokens.transactions[0].asset.id)\n            })\n        },\n    },\n    template: `\n<v-content>\n    <v-container fluid>\n        <div v-if=\"tokens\">Tokens: {{tokens.total}}</div>\n        <presentation-list v-if=\"!voteInProgress\" voteForRunning=true @vote=\"vote\" ></presentation-list>\n        <div v-if=\"voteInProgress\">Committing vote...</div>\n    </v-container>\n</v-content>\n`\n})","import {app} from \"../main.js\";\nimport {autoGrant, findRunningPresentation, grantTime} from \"../model/presentation.js\";\nimport {getChainTimeMillis} from \"../model/chain.js\";\n\nfunction twoDigit(num) {\n    return num < 10 ? \"0\" + num : \"\" + num\n}\n\nfunction minsecs(totalsecs) {\n    const mins = Math.floor(totalsecs / 60)\n    const secs = totalsecs - mins * 60\n    return twoDigit(mins) + \":\" + twoDigit(secs)\n}\n\nexport const TimerPage = Vue.component('timer-page', {\n    data: function () {\n        return {\n            _interval: null,\n            startTS: 0,\n            grantedLength: 0,\n            runningForSecs: 0,\n            presentation: null\n        }\n    },\n    computed: {\n        timer: function() {\n            return minsecs(this.startTS ? this.runningForSecs : 0)\n        },\n        granted: function() {\n            return minsecs(this.startTS ? this.grantedLength : 0)\n        },\n        runnedOut: function() {\n            return this.grantedLength + 1 < this.runningForSecs\n        }\n    },\n    created: function() {\n        this._interval = setInterval(this.step.bind(this), 1000)\n        this.update()\n    },\n    beforeDestroy: function() {\n        clearInterval(this._interval)\n    },\n    methods: {\n        step: function() {\n            this.runningForSecs = getChainTimeMillis() - this.startTS\n            if (this.runningForSecs === this.grantedLength) {\n                this.autoGrant()\n            }\n        },\n        host: function () {\n            app.route(\"\")\n        },\n        autoGrant: function() {\n            autoGrant(this.presentation, 5).then(result => {\n                if (!result) {\n                    console.log(\"No more time granted\")\n                    document.getElementById(\"bellSound\").play()\n                }\n                this.update()\n            })\n        },\n        update: function() {\n            findRunningPresentation().then(presentation => {\n                this.presentation = presentation\n                this.grantedLength = presentation.metadata.grantedLength;\n                this.startTS = presentation.metadata.startTS\n            })\n        }\n    },\n    template: `\n<v-content>\n    <v-container fluid>\n        <div>\n            <div class=\"display-4\"><div v-bind:class=\"{ runnedOut: runnedOut }\">{{timer}}</div></div>\n            <div>Granted: {{granted}}</div>\n            <v-btn @click=\"host()\">Host view</v-btn>\n        </div>\n    </v-container>\n</v-content>\n`\n})","import {selectedToken, getOwnedTokens, selectTokenById, transferAllToNewIdentity} from \"../model/token.js\"\nimport {setMe, me, getTransaction} from \"../model/chain.js\"\n\nexport const KeyLoadPage = Vue.component('keyload-page', {\n    data: function () {\n        return {\n            selectedToken,\n            me: null,\n            tokens: null,\n            noTokensFound: false,\n        }\n    },\n    created: function() {\n        this.update()\n    },\n    methods: {\n        update: function() {\n            this.me = me()\n            getOwnedTokens(me().publicKey).then(ownedTokens => {\n                this.tokens = ownedTokens\n                if (!ownedTokens.total) {\n                    throw \"Zero tokens!\"\n                }\n                return selectTokenById(this.tokens.transactions[0].asset.id)\n                    .then(transferAllToNewIdentity).then(() => {\n                        document.location.href = document.location.pathname + '#keyloadresult'\n                    })\n            }).catch(() => this.noTokensFound = true)\n        },\n    },\n    template: `\n<v-content>\n    <v-container fluid>\n        <div v-if=\"tokens && !noTokensFound\">Creating identity and transferrig {{tokens.total}} tokens...</div>\n        <div v-if=\"noTokensFound\">No tokens found, maybe QR code was already used</div>\n    </v-container>\n</v-content>\n`\n})","\nexport const KeyLoadResultPage = Vue.component('keyload-page', {\n    created: function() {\n        setTimeout(() => {\n            document.location.href = document.location.pathname + '?x=1#visitor'\n        }, 500)\n    },\n    template: `\n<v-content>\n    <v-container fluid>\n        <div>Identity generated, starting app...</div>\n    </v-container>\n</v-content>\n`\n})","import {HostPage} from \"./view/hostpage.js\"\nimport {EntrancePage} from \"./view/entrancepage.js\"\nimport {VisitorPage} from \"./view/visitorpage.js\"\nimport {TimerPage} from \"./view/timerpage.js\"\nimport {KeyLoadPage} from \"./view/keyloadpage.js\";\nimport {KeyLoadResultPage} from \"./view/keyloadresult.js\";\n\nconst NotFound = { template: '<p>Page not found</p>' }\n\nconst routes = {\n    '': HostPage,\n    'visitor': VisitorPage,\n    'entrance': EntrancePage,\n    'timer': TimerPage,\n    'keyload': KeyLoadPage,\n    'keyloadresult': KeyLoadResultPage\n}\n\nexport const app = new Vue({\n    el: '#app',\n    data: {\n        currentRoute: window.location.hash.substr(1)\n    },\n    methods: {\n        route: function(newRoute) {\n            history.pushState(null, \"\", '#' + newRoute)\n            this.currentRoute = newRoute\n        }\n    },\n    computed: {\n        ViewComponent () {\n            return routes[this.currentRoute] || NotFound\n        }\n    },\n    render (h) { return h(this.ViewComponent) }\n})\n"]}